<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mega Evolutions - PokePedia</title>
    <link rel="stylesheet" href="./css/mega.css">
</head>
<body>
    <header style="background:#ffffff;color:rgb(0, 0, 0);padding:20px 0;text-align:center;font-size:34px;letter-spacing:2px;">
        PokePedia
    </header>
    <h1>Mega Evolutions</h1>
    <div class="container" id="mega-container"></div>
    <h1>Mega Evolutions</h1>
    <div class="container" id="mega-container"></div>

    <script>
        const container = document.getElementById('mega-container');

        async function fetchMegaPokemon() {
            // Fetch all Pokémon (PokéAPI currently has 1025+ Pokémon, adjust limit if needed)
            const res = await fetch('https://pokeapi.co/api/v2/pokemon?limit=2000');
            const data = await res.json();
            // Filter for names containing '-mega'
            const megaList = data.results.filter(p => p.name.includes('-mega'));
            megaList.sort((a, b) => a.name.localeCompare(b.name));
            
            // Fetch and display each Mega Evolution
            megaList.forEach(async (poke) => {
                try {
                    const res = await fetch(poke.url);
                    const data = await res.json();

                    // Create card
                    const card = document.createElement('div');
                    card.className = 'card';

                    // Image
                    const img = document.createElement('img');
                    img.src = data.sprites.other['official-artwork'].front_default || data.sprites.front_default;
                    img.alt = data.name;
                    card.appendChild(img);

                    // Name
                    const title = document.createElement('h2');
                    title.textContent = data.name.replace('-mega', ' (Mega)').replace(/-mega-[xy]/, (m) => m === '-mega-x' ? ' (Mega X)' : ' (Mega Y)');
                    card.appendChild(title);

                    // Types
                    const typesDiv = document.createElement('div');
                    typesDiv.className = 'types';
                    data.types.forEach(t => {
                        const typeSpan = document.createElement('span');
                        typeSpan.className = 'type';
                        typeSpan.textContent = t.type.name;
                        typesDiv.appendChild(typeSpan);
                    });
                    card.appendChild(typesDiv);

                    // Base stats
                    const stats = document.createElement('div');
                    stats.innerHTML = data.stats.map(s => `<div>${s.stat.name}: <b>${s.base_stat}</b></div>`).join('');
                    card.appendChild(stats);

                    container.appendChild(card);
                } catch (e) {
                    // Handle errors (e.g., Pokémon not found)
                }
            });
        }

        fetchMegaPokemon();
    </script>
</body>
</html>


